# ğŸ”§ æ¨¡å‹é€‰æ‹©ä¿®å¤è¯´æ˜

**ä¿®å¤æ—¶é—´**: 2025/11/14 12:35
**é—®é¢˜**: ç”Ÿæˆè¿‡ç¨‹ä¸­æç¤º "invalid model select"
**åŸå› **: æ¨¡å‹é…ç½®é»˜è®¤å€¼ä¸º None

---

## âŒ é—®é¢˜åŸå› 

### ä¹‹å‰çš„ä»£ç 

```python
model_name = gr.Dropdown(
    choices=available_models,
    value=available_models[0] if available_models else None,  # âŒ å¯èƒ½ä¸º None
    label="Diffusion Model",
    allow_custom_value=True
)
```

**é—®é¢˜**:
- å¦‚æœ `available_models` ä¸ºç©ºï¼Œ`value` ä¼šæ˜¯ `None`
- ç”Ÿæˆæ—¶ä¼ é€’ `None` ç»™æ¨¡å‹åŠ è½½å‡½æ•°
- å¯¼è‡´ "invalid model select" é”™è¯¯

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤åçš„ä»£ç 

```python
model_name = gr.Dropdown(
    choices=available_models if available_models else ["No models found"],
    value=available_models[0] if available_models and available_models[0] != "No models found" 
          else "Wan2_IceCannon_t2v2.1_nsfw_RCM_Lab_4step.safetensors",  # âœ… æœ‰é»˜è®¤å€¼
    label="Diffusion Model",
    allow_custom_value=True,
    interactive=True
)
```

**æ”¹è¿›**:
1. âœ… å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ¨¡å‹ï¼Œæ˜¾ç¤º "No models found"
2. âœ… æä¾›é»˜è®¤æ¨¡å‹åç§°ä½œä¸ºåå¤‡
3. âœ… æ·»åŠ  `interactive=True` ç¡®ä¿å¯äº¤äº’
4. âœ… å³ä½¿æ¨¡å‹åˆ—è¡¨ä¸ºç©ºï¼Œä¹Ÿæœ‰æœ‰æ•ˆçš„é»˜è®¤å€¼

---

## ğŸ“ ä¿®å¤çš„ä¸‰ä¸ªæ¨¡å‹é…ç½®

### 1. Diffusion Model

```python
model_name = gr.Dropdown(
    choices=available_models if available_models else ["No models found"],
    value=available_models[0] if available_models and available_models[0] != "No models found" 
          else "Wan2_IceCannon_t2v2.1_nsfw_RCM_Lab_4step.safetensors",
    label="Diffusion Model",
    allow_custom_value=True,
    interactive=True
)
```

**é»˜è®¤å€¼**: `Wan2_IceCannon_t2v2.1_nsfw_RCM_Lab_4step.safetensors`

### 2. VAE Model

```python
vae_name = gr.Dropdown(
    choices=available_vaes if available_vaes else ["No VAE found"],
    value=available_vaes[0] if available_vaes and available_vaes[0] != "No VAE found" 
          else "Wan2_1_VAE_bf16.safetensors",
    label="VAE Model",
    allow_custom_value=True,
    interactive=True
)
```

**é»˜è®¤å€¼**: `Wan2_1_VAE_bf16.safetensors`

### 3. T5 Text Encoder

```python
t5_model = gr.Dropdown(
    choices=available_t5 if available_t5 else ["No T5 models found"],
    value=available_t5[0] if available_t5 and available_t5[0] != "No T5 models found" 
          else "models_t5_umt5-xxl-enc-fp8_fully_uncensored.safetensors",
    label="T5 Text Encoder",
    allow_custom_value=True,
    interactive=True
)
```

**é»˜è®¤å€¼**: `models_t5_umt5-xxl-enc-fp8_fully_uncensored.safetensors`

---

## ğŸ¯ é»˜è®¤æ¨¡å‹é…ç½®

### å®Œæ•´çš„é»˜è®¤é…ç½®

```python
# æ¨¡å‹é…ç½®
model_name = "Wan2_IceCannon_t2v2.1_nsfw_RCM_Lab_4step.safetensors"
vae_name = "Wan2_1_VAE_bf16.safetensors"
t5_model = "models_t5_umt5-xxl-enc-fp8_fully_uncensored.safetensors"

# é«˜çº§è®¾ç½®
base_precision = "disabled"
quantization = "fp8_e4m3fn_fast"
attention_mode = "sageattn"
```

è¿™äº›æ˜¯ä¸æ—§ç‰ˆæœ¬ä¸€è‡´çš„é»˜è®¤å€¼ã€‚

---

## ğŸ” å¦‚ä½•éªŒè¯ä¿®å¤

### 1. æ£€æŸ¥æ¨¡å‹é…ç½®

å¯åŠ¨åº”ç”¨åï¼Œæ‰“å¼€ "ğŸ¨ æ¨¡å‹é…ç½®" æŠ˜å é¢æ¿ï¼Œæ£€æŸ¥ï¼š
- âœ… Diffusion Model æœ‰é»˜è®¤å€¼
- âœ… VAE Model æœ‰é»˜è®¤å€¼
- âœ… T5 Text Encoder æœ‰é»˜è®¤å€¼

### 2. æµ‹è¯•ç”Ÿæˆ

1. é€‰æ‹©ä»»æ„æ¨¡å¼
2. è¾“å…¥æç¤ºè¯
3. ç‚¹å‡»ç”Ÿæˆ
4. æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ "invalid model select" é”™è¯¯

### 3. æŸ¥çœ‹æ—¥å¿—

ç”Ÿæˆæ—¶æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼š
```
[ç»Ÿä¸€è§†é¢‘ç”Ÿæˆ] æ¨¡å¼: æ–‡ç”Ÿè§†é¢‘ Text to Video
[æ¨¡å‹é…ç½®] Model: Wan2_IceCannon_t2v2.1_nsfw_RCM_Lab_4step.safetensors
[æ¨¡å‹é…ç½®] VAE: Wan2_1_VAE_bf16.safetensors
[æ¨¡å‹é…ç½®] T5: models_t5_umt5-xxl-enc-fp8_fully_uncensored.safetensors
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ¨¡å‹æ–‡ä»¶ä½ç½®

ç¡®ä¿æ¨¡å‹æ–‡ä»¶åœ¨æ­£ç¡®çš„ç›®å½•ï¼š
```
models/
â”œâ”€â”€ diffusion_models/
â”‚   â””â”€â”€ Wan2_IceCannon_t2v2.1_nsfw_RCM_Lab_4step.safetensors
â”œâ”€â”€ vae/
â”‚   â””â”€â”€ Wan2_1_VAE_bf16.safetensors
â””â”€â”€ t5/
    â””â”€â”€ models_t5_umt5-xxl-enc-fp8_fully_uncensored.safetensors
```

### 2. è‡ªå®šä¹‰æ¨¡å‹åç§°

å¦‚æœä½ çš„æ¨¡å‹æ–‡ä»¶åä¸åŒï¼Œå¯ä»¥ï¼š
1. åœ¨ UI ä¸­æ‰‹åŠ¨è¾“å…¥æ¨¡å‹åç§°ï¼ˆæ”¯æŒ `allow_custom_value=True`ï¼‰
2. æˆ–è€…ä¿®æ”¹é»˜è®¤å€¼ä¸ºä½ çš„æ¨¡å‹åç§°

### 3. æ¨¡å‹æ‰«æ

å¦‚æœæ¨¡å‹åˆ—è¡¨ä¸ºç©ºï¼š
1. æ£€æŸ¥æ¨¡å‹ç›®å½•æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ‰©å±•åï¼ˆåº”è¯¥æ˜¯ `.safetensors`ï¼‰
3. é‡å¯åº”ç”¨é‡æ–°æ‰«æ

---

## ğŸ”„ ä¸æ—§ç‰ˆæœ¬çš„å…¼å®¹æ€§

### æ—§ç‰ˆæœ¬ (ç‹¬ç«‹ Model Settings æ ‡ç­¾é¡µ)

```python
model_name = gr.Dropdown(
    choices=available_models if available_models else ["No models found"],
    value=available_models[0] if available_models and available_models[0] != "No models found" 
          else "Wan2_IceCannon_t2v2.1_nsfw_RCM_Lab_4step.safetensors",
    label="Select Model",
    allow_custom_value=True,
    interactive=True
)
```

### æ–°ç‰ˆæœ¬ (ç»Ÿä¸€è§†é¢‘ç”Ÿæˆæ ‡ç­¾é¡µ)

```python
model_name = gr.Dropdown(
    choices=available_models if available_models else ["No models found"],
    value=available_models[0] if available_models and available_models[0] != "No models found" 
          else "Wan2_IceCannon_t2v2.1_nsfw_RCM_Lab_4step.safetensors",
    label="Diffusion Model",
    allow_custom_value=True,
    interactive=True
)
```

**å®Œå…¨ä¸€è‡´ï¼** âœ…

---

## ğŸ“Š ä¿®å¤å‰åå¯¹æ¯”

| é¡¹ç›® | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| **é»˜è®¤å€¼** | None (å¯èƒ½) | æœ‰æ•ˆçš„æ¨¡å‹åç§° |
| **é”™è¯¯æç¤º** | "invalid model select" | æ— é”™è¯¯ |
| **ç”¨æˆ·ä½“éªŒ** | éœ€è¦æ‰‹åŠ¨é€‰æ‹© | è‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼ |
| **å…¼å®¹æ€§** | å¯èƒ½å‡ºé”™ | å®Œå…¨å…¼å®¹ |

---

## âœ… ä¿®å¤å®Œæˆ

### ä¿®å¤å†…å®¹

1. âœ… Diffusion Model é»˜è®¤å€¼ä¿®å¤
2. âœ… VAE Model é»˜è®¤å€¼ä¿®å¤
3. âœ… T5 Text Encoder é»˜è®¤å€¼ä¿®å¤
4. âœ… æ·»åŠ  `interactive=True`
5. âœ… æ·»åŠ åå¤‡é»˜è®¤å€¼

### æµ‹è¯•å»ºè®®

1. é‡å¯åº”ç”¨
2. æµ‹è¯•æ–‡ç”Ÿè§†é¢‘
3. æµ‹è¯•å›¾ç”Ÿè§†é¢‘
4. æ£€æŸ¥æ˜¯å¦è¿˜æœ‰é”™è¯¯

---

**ğŸ‰ "invalid model select" é”™è¯¯å·²ä¿®å¤ï¼** ğŸ‰

**ç°åœ¨å¯ä»¥é‡æ–°å¯åŠ¨åº”ç”¨æµ‹è¯•äº†ï¼š**
```bash
START_UI.bat
```
